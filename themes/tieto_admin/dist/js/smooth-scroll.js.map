{"version":3,"file":"smooth-scroll.js","sources":["src/scripts/smooth-scroll.js"],"sourcesContent":["/**\n * @file\n * Smooth Scroll.\n *\n * @author Gergely Pap <gpap@brainsum.com>\n */\n\n(($, Drupal) => {\n\n  /**\n   * Speed of the smooth scroll.\n   *\n   * @type {Number}\n   */\n  const scrollSpeed = 300\n\n  /**\n   * Additional offset in pixels.\n   * DON'T worry about Drupal Admin toolbar, it is already calculated in. :)\n   *\n   *   negative: scroll past the item.\n   *   0: stop exactly at the item.\n   *   positive: scroll before the item.\n   *\n   * @type {Number}\n   */\n  const offset = 72\n\n  /**\n   * Update the hash in the URL without jumping to the element.\n   *\n   * @param  {String} hash\n   * @return {void}\n   */\n  var updateHash = (hash) => {\n    if (history.pushState) history.pushState(null, null, hash)\n    else window.location.hash = hash\n    // @fixme temp\n    // $('.campaign-menu-link > a.active').removeClass('active')\n    // $('a[href=\"' + hash + '\"]').addClass('active')\n  }\n\n  /**\n   * Applying the animation to all anchors, which have\n   * <a href=\"#my-anchor\"> format.\n   */\n  var smoothScroll = function (e) {\n    e.preventDefault()\n    updateHash(this.hash)\n\n    if (location.pathname.replace(/^\\//, '') == this.pathname.replace(/^\\//, '') && location.hostname == this.hostname) {\n\n      // Calculate admin toolbar height.\n      // Both Toolbar and its Tray are 39px in default Drupal theme.\n      var headerHeight = 0\n      if ($('body').hasClass('toolbar-horizontal')) {\n        headerHeight = 39\n        if ($('body').hasClass('toolbar-tray-open')) {\n          headerHeight += 39\n        }\n      }\n\n      var target = $(this.hash)\n      if (target.length) {\n        $('html,body').animate({\n          scrollTop: target.offset().top - headerHeight - offset\n        }, scrollSpeed)\n        if ($(window).width() < 768 && $('#hamburger').hasClass('is-active')) {\n          $('#hamburger').removeClass('is-active')\n        }\n        return false\n      }\n    }\n  }\n\n  /**\n   * Initialise.\n   */\n  Drupal.behaviors.smoothScroll = {\n    attach: function (context, settings) {\n      $('a[href*=#]:not([href=#]):not([href^=#tab-])', context).on('click', smoothScroll)\n    }\n  }\n\n})(jQuery, Drupal)\n"],"names":["const"],"mappings":";;;AAAA;;;;;;;AAOA,CAAC,UAAC,CAAC,EAAE,MAAM,EAAE;;;;;;;EAOXA,IAAM,WAAW,GAAG,GAAG;;;;;;;;;;;;EAYvBA,IAAM,MAAM,GAAG,EAAE;;;;;;;;EAQjB,IAAI,UAAU,GAAG,UAAC,IAAI,EAAE;IACtB,IAAI,OAAO,CAAC,SAAS,EAAE,OAAO,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;SACrD,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,IAAI;;;;GAIjC;;;;;;EAMD,IAAI,YAAY,GAAG,UAAU,CAAC,EAAE;IAC9B,CAAC,CAAC,cAAc,EAAE;IAClB,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC;;IAErB,IAAI,QAAQ,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,IAAI,QAAQ,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,EAAE;;;;MAIlH,IAAI,YAAY,GAAG,CAAC;MACpB,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,QAAQ,CAAC,oBAAoB,CAAC,EAAE;QAC5C,YAAY,GAAG,EAAE;QACjB,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,QAAQ,CAAC,mBAAmB,CAAC,EAAE;UAC3C,YAAY,IAAI,EAAE;SACnB;OACF;;MAED,IAAI,MAAM,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;MACzB,IAAI,MAAM,CAAC,MAAM,EAAE;QACjB,CAAC,CAAC,WAAW,CAAC,CAAC,OAAO,CAAC;UACrB,SAAS,EAAE,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,YAAY,GAAG,MAAM;SACvD,EAAE,WAAW,CAAC;QACf,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,KAAK,EAAE,GAAG,GAAG,IAAI,CAAC,CAAC,YAAY,CAAC,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE;UACpE,CAAC,CAAC,YAAY,CAAC,CAAC,WAAW,CAAC,WAAW,CAAC;SACzC;QACD,OAAO,KAAK;OACb;KACF;GACF;;;;;EAKD,MAAM,CAAC,SAAS,CAAC,YAAY,GAAG;IAC9B,MAAM,EAAE,UAAU,OAAO,EAAE,QAAQ,EAAE;MACnC,CAAC,CAAC,6CAA6C,EAAE,OAAO,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,YAAY,CAAC;KACpF;GACF;;CAEF,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC;;","sourceRoot":"/source/"}