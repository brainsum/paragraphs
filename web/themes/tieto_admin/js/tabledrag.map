{"version":3,"sources":["tabledrag.js"],"names":["$","Drupal","behaviors","tableDrag","attach","context","settings","initTableDrag","table","base","length","hasOwnProperty","find","once","TableDrag","_dragStart","prototype","dragStart","tableSettings","indexOf","$table","apply","arguments","jQuery"],"mappings":";CAKA,SAAWA,EAAGC,GAEZ,aAMAA,EAAOC,UAAUC,UAAY,CAC3BC,OAAQ,SAAUC,EAASC,GAChBC,SAAAA,EAAcC,EAAOC,GACxBD,EAAME,SAGRT,EAAOE,UAAUM,GAAQ,IAAIR,EAAOE,UAAUK,EAAM,GAAIF,EAASH,UAAUM,GAAOA,IAIjF,IAAA,IAAIA,KAAQH,EAASH,UACpBG,EAASH,UAAUQ,eAAeF,IACpCF,EAAcP,EAAEK,GAASO,KAAK,IAAMH,GAAMI,KAAK,aAAcJ,KAOjEK,IAAAA,EAAYb,EAAOE,UACnBY,EAAaD,EAAUE,UAAUC,UAMrChB,EAAOE,UAAY,SAAUK,EAAOU,EAAeT,GAC7CN,IAAAA,EAAY,IAAIW,EAAUN,EAAOU,GAM9Bf,OAJHM,EAAKU,SAAQ,KACfhB,EAAUc,UAAYA,GAGjBd,GAONc,IAAAA,EAAY,WACc,KAAKG,OAAOR,KAAK,uBAAuBF,QAMnEK,EAAWM,MAAM,KAAMC,YAvD3B,CAyDGC,OAAQtB","file":"tabledrag.map","sourceRoot":"..\\src\\js","sourcesContent":["/**\n * @file\n * Modify default Drupal tabledrag functionality\n */\n\n(function ($, Drupal) {\n\n  'use strict';\n\n  /**\n   * Override Drupal's default, the only difference is,\n   * that we pass a third arguments to the tableDrag constructor\n   */\n  Drupal.behaviors.tableDrag = {\n    attach: function (context, settings) {\n      function initTableDrag(table, base) {\n        if (table.length) {\n          // Create the new tableDrag instance. Save in the Drupal variable\n          // to allow other scripts access to the object.\n          Drupal.tableDrag[base] = new Drupal.tableDrag(table[0], settings.tableDrag[base], base);\n        }\n      }\n\n      for (var base in settings.tableDrag) {\n        if (settings.tableDrag.hasOwnProperty(base)) {\n          initTableDrag($(context).find('#' + base).once('tabledrag'), base);\n        }\n      }\n    }\n  };\n\n  // References to the original constructor and dragStart handler\n  var TableDrag = Drupal.tableDrag;\n  var _dragStart = TableDrag.prototype.dragStart;\n\n  /**\n   * Override Drupal's default constructor\n   * We call the original, and replace the dragStart handler if it's the paragraph list\n   */\n  Drupal.tableDrag = function (table, tableSettings, base) {\n    var tableDrag = new TableDrag(table, tableSettings);\n\n    if (base.indexOf('field-paragraphs-values' === 0)) {\n      tableDrag.dragStart = dragStart;\n    }\n\n    return tableDrag;\n  };\n\n  /**\n   * The modified dragStart handler, which prevents dragging if services are open\n   * otherwise call the original handler\n   */\n\tvar dragStart = function() {\n    var numberOfOpenSections = this.$table.find('.paragraphs-subform').length;\n\n    if (numberOfOpenSections) {\n      return;\n    }\n\n    _dragStart.apply(this, arguments);\n\t};\n})(jQuery, Drupal);"]}